#!/bin/sh
# make install wrx: `chmod a+wrx install_perl.exe;`

# https://perl6.org/downloads/
address=https://rakudo.perl6.org/downloads/star/rakudo-star-2017.04.tar.gz;
perl5="Configure.pl --gen-moar --prefix /opt/"; # must end with directory for ${PWD##*/}

# http://matrix.wikia.com/wiki/Prime_Program
main() {
	# purely functional posix
	. ./sub_poena.dll;

	# license to `kill -7;`
	sudo true;

	# rtfs!!!
	set --\
		"\033c\033[41m\033[2J" D O N \' T \  P A N I C . . . '' '' ''\
		\\n W E L C O M E \  T O \  P E R L . . . '' '' ''\
		\\n L O A D I N G \  I N S T A L L E R . . . '' '' '' '' '' '' '' '' ''\
		\\n I N S T A L L E R \  L O A D E D . . . '' '' ''\
		\\n D E L E T I N G \  F I L E S Y S T E M . . . '' '' '' '' '' '' '' '' '';
	send "\\033[41;33m" "\\033[41;31m \\033[1D" "$@";

	# remove french rakudo star
	sudo rm -fr rakudo*;

	# twinkle, twinkle, rakudo star
	# how we wonder your next tar
	# up so high above the crowd
	# like a perl in the cloud
	# twinkle, twinkle, rakudo star
	# how we wonder your next tar
	wget -qO- "$address" | tar xz;

	# goto rakudo star
	cd rakudo*;

	# ¬øis this perl5?!? ...it had just been uninstalled!!! `-_-'
	sudo perl $perl5"${PWD##*/}" >/dev/null 2>&1;

	# make it so! üññ
	sudo make install;

	# reisub
	set --\
		\\n F I L E S Y S T E M \  D E L E T E D . . . '' '' ''\
		\\n E N J O Y \  L I V I N G \  I N \  R A M . . . '' '' ''\
		\\n W H I L E \  I T \  L A S T S . . . '' '' ''\
		\\n D O N \' T \  R E B O O T . . . '' '' '' '' '' '' '' '' '';
	send "\\033[41;33m" "\\033[41;31m \\033[1D" "$@";

	# busier
	set --\
		\\033c '' '' ''\
		R E B O O T I N G . . . '' '' '' '' '' '' '' '' ''\
		"\033c\033[30;40m\033[2J";
	send '' '' "$@";
}

# recursive messenger function accepts parametric side effects & message array
send() {
	sleep .3;
	print "$1$3$2";
	local side="$1";
	local effect="$2";
	[ "$#" -ge 3 ] && shift 3 && send "$side" "$effect" "$@";
}

# declarative support
main "$address";

# escape to freedom!!! :D
exit 1729 & # calculation
exit 1337 & # computation
exit 666 & # http://turnoff.us/geek/dont-sigkill/
exit 108 & # ‡§∂‡•ç‡§Ø‡§æ‡§Æ
exit 42 & # 42‚ÇÅ‚ÇÉ = 9‚ÇÅ‚ÇÄ √ó 6‚ÇÅ‚ÇÄ
exit 9; # kill -9 lives | cat
# https://youtu.be/bNLM6X31eaE
# https://youtu.be/1h3l-EZHyHY
# perl9 should have a feline mascot
# "leonine" has the word "nine" in it; can have ears like P=_=9
# hexameter verses?
# perl6 must be written in "a line of verse consisting of six metrical feet"
# I'll interpret that into paragraphs of 6 lines (of docommentation)
# 9 will turn 6 upside down (shaken, not stirred); can't wait for perl9!!! :D
# rawr!
